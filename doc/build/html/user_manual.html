<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>User manual &mdash; sb_pipe 0.59.0 documentation</title>
    
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.59.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="sb_pipe 0.59.0 documentation" href="index.html" />
    <link rel="next" title="Developer manual" href="developer_manual.html" />
    <link rel="prev" title="Documentation for sb_pipe" href="index.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="developer_manual.html" title="Developer manual"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="index.html" title="Documentation for sb_pipe"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">sb_pipe 0.59.0 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="user-manual">
<h1>User manual<a class="headerlink" href="#user-manual" title="Permalink to this headline">¶</a></h1>
<p>Mailing list: sb_pipe AT googlegroups.com</p>
<p>Forum: <a class="reference external" href="https://groups.google.com/forum/#!forum/sb_pipe">https://groups.google.com/forum/#!forum/sb_pipe</a></p>
<p><a class="reference external" href="https://travis-ci.org/pdp10/sb_pipe"><img alt="Build Status" src="https://travis-ci.org/pdp10/sb_pipe.svg?branch=master" /></a></p>
<p><a class="reference external" href="https://www.gnu.org/licenses/lgpl.html"><img alt="LGPLv3 License" src="http://img.shields.io/badge/license-LGPLv3-blue.svg" /></a></p>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>This package contains a collection of pipelines for dynamic modelling of
biological systems. It aims to automate common processes and speed up
productivity for tasks such as model simulation, single and double
parameter scan, and parameter estimation.</p>
<div class="section" id="requirements">
<h3>Requirements<a class="headerlink" href="#requirements" title="Permalink to this headline">¶</a></h3>
<p>In order to use sb_pipe, the following software must be installed:</p>
<ul class="simple">
<li>Copasi 4.16 - <a class="reference external" href="http://copasi.org/">http://copasi.org/</a></li>
<li>Python 2.7+ - <a class="reference external" href="https://www.python.org/">https://www.python.org/</a></li>
<li>R 3.3.0+ - <a class="reference external" href="https://cran.r-project.org/">https://cran.r-project.org/</a></li>
<li>LaTeX 2013 (optional) <a class="reference external" href="https://latex-project.org/ftp.html">https://latex-project.org/ftp.html</a></li>
</ul>
<p>You should also make sure that the following packages are installed in
your machine: <code class="docutils literal"><span class="pre">python-pip</span></code>, and (optionally) <code class="docutils literal"><span class="pre">texlive-latex-base</span></code>.</p>
<p>Before installing sb_pipe Python and R dependencies the following
environment variables must be added to your GNU/Linux $HOME/.bashrc
file:</p>
<div class="highlight-python"><div class="highlight"><pre># SB_PIPE
export SB_PIPE=/path/to/sb_pipe
export PATH=$PATH:${SB_PIPE}/sb_pipe

# Path to CopasiSE
export PATH=$PATH:/path/to/CopasiSE
</pre></div>
</div>
<p>The .bashrc file can then be reloaded from your shell using the command:</p>
<div class="highlight-python"><div class="highlight"><pre>$ source $HOME/.bashrc
</pre></div>
</div>
<p>On Windows platforms, these environment variables are configured as any
other Windows environment variable.</p>
<p>Now it is the time to install Python and R packages used by sb_pipe.
Two scripts are provided to perform these tasks automatically.</p>
<p>To install sb_pipe Python dependencies, run:</p>
<div class="highlight-python"><div class="highlight"><pre>cd ${SB_PIPE}/
./install_pydeps.py
</pre></div>
</div>
<p>To install sb_pipe R dependencies, run:</p>
<div class="highlight-python"><div class="highlight"><pre>cd ${SB_PIPE}/
$ R
# Inside R environment, answer &#39;y&#39; to install packages locally
&gt; source(&#39;install_rdeps.r&#39;)
</pre></div>
</div>
<p>If R package dependencies must be compiled, it is worth checking that
the following additional packages are installed in your machine:
<code class="docutils literal"><span class="pre">build-essential</span></code>, <code class="docutils literal"><span class="pre">liblapack-dev</span></code>, <code class="docutils literal"><span class="pre">libblas-dev</span></code>,
<code class="docutils literal"><span class="pre">libcairo-dev</span></code>, <code class="docutils literal"><span class="pre">libssl-dev</span></code>, <code class="docutils literal"><span class="pre">libcurl4-openssl-dev</span></code>. After
installing these packages, <code class="docutils literal"><span class="pre">install_rdeps.r</span></code> must be executed again.</p>
</div>
<div class="section" id="installation">
<h3>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h3>
<p>Run the command inside the sb_pipe folder:</p>
<div class="highlight-python"><div class="highlight"><pre>python setup.py install
</pre></div>
</div>
<p>The correct installation of sb_pipe and its dependencies can be checked
by running the following commands inside the sb_pipe folder:</p>
<div class="highlight-python"><div class="highlight"><pre>cd tests
./test_suite.py
</pre></div>
</div>
</div>
</div>
<div class="section" id="how-to-use-sb-pipe">
<h2>How to use sb_pipe<a class="headerlink" href="#how-to-use-sb-pipe" title="Permalink to this headline">¶</a></h2>
<div class="section" id="preliminary-configuration-steps">
<h3>Preliminary configuration steps<a class="headerlink" href="#preliminary-configuration-steps" title="Permalink to this headline">¶</a></h3>
<div class="section" id="pipelines-using-copasi">
<h4>Pipelines using Copasi<a class="headerlink" href="#pipelines-using-copasi" title="Permalink to this headline">¶</a></h4>
<p>Before using these pipelines, a Copasi model must be configured as
follow using CopasiUI:</p>
<p><strong>pipeline: simulate</strong></p>
<ul class="simple">
<li>Tick the flag <em>executable</em> in the Time Course Task.</li>
<li>Select a report template for the Time Course Task.</li>
<li>Save the report in the same folder with the same name as the model
but replacing the extension .cps with .csv.</li>
</ul>
<p><strong>pipeline: single or double parameter scan</strong></p>
<ul class="simple">
<li>Tick the flag <em>executable</em> in the Parameter Scan Task.</li>
<li>Select a report template for the Parameter Scan Task.</li>
<li>Save the report in the same folder with the same name as the model
but replacing the extension .cps with .csv.</li>
</ul>
<p><strong>pipeline: param-estim</strong></p>
<ul class="simple">
<li>Tick the flag <em>executable</em> in the Parameter Estimation Task.</li>
<li>Select the report template for the Parameter Estimation Task.</li>
<li>Save the report in the same folder with the same name as the model
but replacing the extension .cps with .csv.</li>
</ul>
</div>
</div>
<div class="section" id="running-sb-pipe">
<h3>Running sb_pipe<a class="headerlink" href="#running-sb-pipe" title="Permalink to this headline">¶</a></h3>
<p>The first step is to create a new project. This can be done with the
command:</p>
<div class="highlight-python"><div class="highlight"><pre>run_sb_pipe.py --create-project projectname
</pre></div>
</div>
<p>The previous command generates the following structure:</p>
<div class="highlight-python"><div class="highlight"><pre>projectname/
    | - Data/
    | - Models/
    | - Working_Folder/
</pre></div>
</div>
<p>Models must be stored in the Models/ folder. The folder Data/ is meant
for collecting experimental data files and analyses in one place. Once
the data files for Copasi (e.g. for parameter estimation) are generated,
<strong>it is advised</strong> to move them into the Models/ folder so that the
Copasi (.cps) file and its associated experimental data files are stored
in the same folder. To run sb_pipe, users need to create a
configuration file for each pipeline they intend to run (see next
section). These configuration files should be placed in the
Working_Folder/. This folder will eventually contain all the results
generated by sb_pipe.</p>
<p>Finally, a pipeline with a certain configuration file can be executed as
follows:</p>
<div class="highlight-python"><div class="highlight"><pre>cd Working_Folder
run_sb_pipe.py pipeline configuration_file
</pre></div>
</div>
<p>where <em>pipeline</em> can be one of the following option:</p>
<ul class="simple">
<li>&#8211;simulate (-s)</li>
<li>&#8211;single-param-scan (-p)</li>
<li>&#8211;double-param-scan (-d)</li>
<li>&#8211;param-estim (-e)</li>
</ul>
<p>For additional options, run</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">run_sb_pipe</span><span class="o">.</span><span class="n">py</span> <span class="o">--</span><span class="n">help</span>
</pre></div>
</div>
</div>
<div class="section" id="pipeline-configuration-files">
<h3>Pipeline configuration files<a class="headerlink" href="#pipeline-configuration-files" title="Permalink to this headline">¶</a></h3>
<p>Pipelines are configured using files (here called configuration files).
These files are INI files and are therefore structured as follows:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="p">[</span><span class="n">pipeline_name</span><span class="p">]</span>
<span class="n">option1</span><span class="o">=</span><span class="n">value1</span>
<span class="n">option2</span><span class="o">=</span><span class="n">value2</span>
<span class="o">...</span>
</pre></div>
</div>
<p>In sb_pipe each pipeline executes three tasks: data generation, data
analysis, and report generation. Each task depends on the previous one.
This choice allows user to analyse the same data without having to
generate it every time, or to skip the report generation if not wanted.
Assuming that the configuration files are placed in the Working_Folder
of a certain project, examples are given as follow:</p>
<p><strong>Example 1:</strong> configuration file for the pipeline <em>simulate</em></p>
<div class="highlight-python"><div class="highlight"><pre>[simulate]
generate_data=True                # True if data must be generated, False otherwise
analyse_data=True                 # True if data must be analysed, False otherwise
generate_report=True              # True if a report must be generated, False otherwise
project_dir=..                    # The relative path to the project directory (from Working_Folder)
model=insulin_receptor_stoch.cps  # The Copasi model name
cluster=pp                        # The cluster type. pp (parallel python) if the model is executed locally, sge/lsf if executed on cluster.
pp_cpus=7                         # The number of CPU if pp is used, ignored otherwise
runs=40                           # The number of simulations to perform. 1 for deterministic simulations, n&gt;=1 for stochastic simulations.
simulate__xaxis_label=Time [min]  # The label for the x axis.
</pre></div>
</div>
<p><strong>Example 2:</strong> configuration file for the pipeline <em>single_param_scan</em></p>
<div class="highlight-python"><div class="highlight"><pre>[single_param_scan]
generate_data=True
analyse_data=True
generate_report=True
project_dir=..
model=insulin_receptor_inhib_scan_IR_beta.cps
scanned_par=IR_beta                            # The variable to scan (as set in Copasi Parameter Scan Task)
simulate__intervals=100                        # The number of intervals in the simulation
simulate__xaxis_label=Time [min]
single_param_scan_simulations_number=1         # The number of simulations to perform for each scan
single_param_scan_knock_down_only=True         # True if the variable is only reduced (knock down), False if over expression is also considered.
single_param_scan_percent_levels=True          # True if the scanning represents percent levels.
min_level=0                                    # The minimum level (as set in Copasi Parameter Scan Task)
max_level=100                                  # The maximum level (as set in Copasi Parameter Scan Task)
levels_number=10                               # The number of scans (as set in Copasi Parameter Scan Task)
homogeneous_lines=False                        # True if the plot lines should not distinguish between scans (e.g. full lines with the same colour)
</pre></div>
</div>
<p><strong>Example 3:</strong> configuration file for the pipeline <em>double_param_scan</em></p>
<div class="highlight-python"><div class="highlight"><pre>[double_param_scan]
generate_data=True
analyse_data=True
generate_report=True
project_dir=..
model=insulin_receptor_inhib_dbl_scan_InsulinPercent__IRbetaPercent.cps
scanned_par1=InsulinPercent                                              # The 1st variable to scan (as set in Copasi Parameter Scan Task)
scanned_par2=IRbetaPercent                                               # The 2nd variable to scan (as set in Copasi Parameter Scan Task)
sim_length=10                                                            # The length of the simulation (as set in Copasi Time Course Task)
</pre></div>
</div>
<p><strong>Example 4:</strong> configuration file for the pipeline <em>param_estim</em></p>
<div class="highlight-python"><div class="highlight"><pre>[param_estim]
generate_data=True
analyse_data=True
generate_report=True
generate_tarball=True
project_dir=..
model=insulin_receptor_param_estim.cps
cluster=pp
pp_cpus=7
round=1                                  # The parameter estimation round which is used to distinguish phases of parameter estimations when parameters cannot be estimated at the same time
runs=40                                  # The number of parameter estimations (the length of the fit sequence)
best_fits_percent=75                     # The threshold percentage of the best fits to consider
data_point_num=33                        # The number of available data points
plot_2d_66_95cl_corr=True                # True if 2D all fits plots for 66% and 95% confidence levels should be plotted. This is computationally expensive.
logspace=True                            # True if parameter values should plotted in log space.
</pre></div>
</div>
<p>Additional examples of configuration files can be found in:</p>
<div class="highlight-python"><div class="highlight"><pre>${SB_PIPE}/tests/insulin_receptor/Working_Folder/
</pre></div>
</div>
</div>
</div>
<div class="section" id="how-to-report-issues-or-request-new-features">
<h2>How to report issues or request new features<a class="headerlink" href="#how-to-report-issues-or-request-new-features" title="Permalink to this headline">¶</a></h2>
<p>sb_pipe is a relatively young project and there is a chance that some
error occurs. If this is the case, users should report problems using
the following mailing list:</p>
<div class="highlight-python"><div class="highlight"><pre>sb_pipe AT googlegroups.com
</pre></div>
</div>
<p>To help us better identify and reproduce your problem, some technical
information is needed. This detail data can be found in sb_pipe log
files which are stored in ${HOME}/.sb_pipe/logs/. When using the
mailing list above, it would be worth providing this extra information.</p>
<p>Issues and feature requests can also be notified using the github issue
tracking system for sb_pipe at the web page:
<a class="reference external" href="https://github.com/pdp10/sb_pipe/issues">https://github.com/pdp10/sb_pipe/issues</a>.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">User manual</a><ul>
<li><a class="reference internal" href="#introduction">Introduction</a><ul>
<li><a class="reference internal" href="#requirements">Requirements</a></li>
<li><a class="reference internal" href="#installation">Installation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#how-to-use-sb-pipe">How to use sb_pipe</a><ul>
<li><a class="reference internal" href="#preliminary-configuration-steps">Preliminary configuration steps</a><ul>
<li><a class="reference internal" href="#pipelines-using-copasi">Pipelines using Copasi</a></li>
</ul>
</li>
<li><a class="reference internal" href="#running-sb-pipe">Running sb_pipe</a></li>
<li><a class="reference internal" href="#pipeline-configuration-files">Pipeline configuration files</a></li>
</ul>
</li>
<li><a class="reference internal" href="#how-to-report-issues-or-request-new-features">How to report issues or request new features</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="index.html"
                        title="previous chapter">Documentation for sb_pipe</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="developer_manual.html"
                        title="next chapter">Developer manual</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/user_manual.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="developer_manual.html" title="Developer manual"
             >next</a> |</li>
        <li class="right" >
          <a href="index.html" title="Documentation for sb_pipe"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">sb_pipe 0.59.0 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2016, Piero Dalle Pezze.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.6.
    </div>
  </body>
</html>